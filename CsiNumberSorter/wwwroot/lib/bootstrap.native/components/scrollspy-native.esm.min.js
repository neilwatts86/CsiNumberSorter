const addEventListener="addEventListener",removeEventListener="removeEventListener",supportPassive=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get(){return e=!0,e}});document[addEventListener]("DOMContentLoaded",function e(){document[removeEventListener]("DOMContentLoaded",e,t)},t)}catch(e){throw Error("Passive events are not supported")}return e})();var passiveHandler=!!supportPassive&&{passive:!0};function queryElement(e,t){const s=t&&t instanceof Element?t:document;return e instanceof Element?e:s.querySelector(e)}function addClass(e,t){e.classList.add(t)}function hasClass(e,t){return e.classList.contains(t)}function removeClass(e,t){e.classList.remove(t)}const activeClass="active";function bootstrapCustomEvent(e,t){const s=new CustomEvent(e,{cancelable:!0});return t instanceof Object&&Object.keys(t).forEach(e=>{Object.defineProperty(s,e,{value:t[e]})}),s}function normalizeValue(e){return"true"===e||"false"!==e&&(Number.isNaN(+e)?""===e||"null"===e?null:e:+e)}function normalizeOptions(e,t,s,o){const n={},r={},l={...e.dataset};return Object.keys(l).forEach(e=>{var t=e.includes(o)?e.replace(o,"").replace(/[A-Z]/,e=>e.toLowerCase()):e;r[t]=normalizeValue(l[e])}),Object.keys(s).forEach(e=>{s[e]=normalizeValue(s[e])}),Object.keys(t).forEach(e=>{e in s?n[e]=s[e]:e in r?n[e]=r[e]:n[e]=t[e]}),n}class BaseComponent{constructor(e,t,s,o){var n=this;const r=queryElement(t);r[e]&&r[e].dispose(),n.element=r,s&&Object.keys(s).length&&(n.options=normalizeOptions(r,s,o||{},"bs")),r[e]=n}dispose(e){const t=this;t.element[e]=null,Object.keys(t).forEach(e=>{t[e]=null})}}const scrollspyString="scrollspy",scrollspyComponent="ScrollSpy",scrollspySelector='[data-bs-spy="scroll"]',scrollSpyDefaultOptions={offset:10,target:null},activateScrollSpy=bootstrapCustomEvent(`activate.bs.${scrollspyString}`);function updateSpyTargets(n){const{target:e,scrollTarget:r,isWindow:l,options:t,itemsLength:s,scrollHeight:o}=n,{offset:a}=t;var c=e.getElementsByTagName("A");if(n.scrollTop=l?r.pageYOffset:r.scrollTop,s!==c.length||getScrollHeight(r)!==o){let t,s,o;n.items=[],n.offsets=[],n.scrollHeight=getScrollHeight(r),n.maxScroll=n.scrollHeight-getOffsetHeight(n),Array.from(c).forEach(e=>{t=e.getAttribute("href"),s=t&&"#"===t.charAt(0)&&"#"!==t.slice(-1)&&queryElement(t),s&&(n.items.push(e),o=s.getBoundingClientRect(),n.offsets.push((l?o.top+n.scrollTop:s.offsetTop)-a))}),n.itemsLength=n.items.length}}function getScrollHeight(e){return e.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}function getOffsetHeight({element:e,isWindow:t}){return t?window.innerHeight:e.getBoundingClientRect().height}function clear(e){Array.from(e.getElementsByTagName("A")).forEach(e=>{hasClass(e,activeClass)&&removeClass(e,activeClass)})}function activate(e,t){const{target:s,element:o}=e;clear(s),addClass(e.activeItem=t,activeClass);const n=[];let r=t;for(;r!==document.body;)r=r.parentNode,(hasClass(r,"nav")||hasClass(r,"dropdown-menu"))&&n.push(r);n.forEach(e=>{e=e.previousElementSibling;e&&!hasClass(e,activeClass)&&addClass(e,activeClass)}),activateScrollSpy.relatedTarget=t,o.dispatchEvent(activateScrollSpy)}function toggleSpyHandlers(e,t){t=t?addEventListener:removeEventListener;e.scrollTarget[t]("scroll",e.refresh,passiveHandler)}class ScrollSpy extends BaseComponent{constructor(e,t){super(scrollspyComponent,e,scrollSpyDefaultOptions,t);var s=this,{element:e,options:t}=s;s.target=queryElement(t.target),s.target&&(s.scrollTarget=e.clientHeight<e.scrollHeight?e:window,s.isWindow=s.scrollTarget===window,s.scrollTop=0,s.maxScroll=0,s.scrollHeight=0,s.activeItem=null,s.items=[],s.offsets=[],s.refresh=s.refresh.bind(s),toggleSpyHandlers(s,1),s.refresh())}refresh(){const s=this;var{target:e}=s;if(0!==e.offsetHeight){updateSpyTargets(s);const{scrollTop:o,maxScroll:n,itemsLength:r,items:l,activeItem:a}=s;if(o>=n){var t=l[r-1];a!==t&&activate(s,t)}else{const{offsets:c}=s;if(a&&o<c[0]&&0<c[0])return s.activeItem=null,void clear(e);l.forEach((e,t)=>{a!==e&&o>=c[t]&&(void 0===c[t+1]||o<c[t+1])&&activate(s,e)})}}}dispose(){toggleSpyHandlers(this),super.dispose(scrollspyComponent)}}ScrollSpy.init={component:scrollspyComponent,selector:scrollspySelector,constructor:ScrollSpy};export default ScrollSpy;