function queryElement(e,n){const o=n&&n instanceof Element?n:document;return e instanceof Element?e:o.querySelector(e)}const addEventListener="addEventListener",removeEventListener="removeEventListener",supportPassive=(()=>{let e=!1;try{const n=Object.defineProperty({},"passive",{get(){return e=!0,e}});document[addEventListener]("DOMContentLoaded",function e(){document[removeEventListener]("DOMContentLoaded",e,n)},n)}catch(e){throw Error("Passive events are not supported")}return e})();var passiveHandler=!!supportPassive&&{passive:!0};function addClass(e,n){e.classList.add(n)}function hasClass(e,n){return e.classList.contains(n)}function removeClass(e,n){e.classList.remove(n)}const ariaExpanded="aria-expanded",showClass="show",dataBsToggle="data-bs-toggle",dropdownMenuClasses=["dropdown","dropup","dropstart","dropend"],dropdownMenuClass="dropdown-menu";function bootstrapCustomEvent(e,n){const o=new CustomEvent(e,{cancelable:!0});return n instanceof Object&&Object.keys(n).forEach(e=>{Object.defineProperty(o,e,{value:n[e]})}),o}function isEmptyAnchor(e){const n=e.closest("A");return e&&(e.href&&"#"===e.href.slice(-1)||n&&n.href&&"#"===n.href.slice(-1))}function setFocus(e){e.focus()}function normalizeValue(e){return"true"===e||"false"!==e&&(Number.isNaN(+e)?""===e||"null"===e?null:e:+e)}function normalizeOptions(e,n,o,t){const s={},r={},d={...e.dataset};return Object.keys(d).forEach(e=>{var n=e.includes(t)?e.replace(t,"").replace(/[A-Z]/,e=>e.toLowerCase()):e;r[n]=normalizeValue(d[e])}),Object.keys(o).forEach(e=>{o[e]=normalizeValue(o[e])}),Object.keys(n).forEach(e=>{e in o?s[e]=o[e]:e in r?s[e]=r[e]:s[e]=n[e]}),s}class BaseComponent{constructor(e,n,o,t){var s=this;const r=queryElement(n);r[e]&&r[e].dispose(),s.element=r,o&&Object.keys(o).length&&(s.options=normalizeOptions(r,o,t||{},"bs")),r[e]=s}dispose(e){const n=this;n.element[e]=null,Object.keys(n).forEach(e=>{n[e]=null})}}const[dropdownString]=dropdownMenuClasses,dropdownComponent="Dropdown",dropdownSelector=`[${dataBsToggle}="${dropdownString}"]`,dropupString=dropdownMenuClasses[1],dropstartString=dropdownMenuClasses[2],dropendString=dropdownMenuClasses[3],dropdownMenuEndClass=`${dropdownMenuClass}-end`,hideMenuClass=["d-block","invisible"],verticalClass=[dropdownString,dropupString],horizontalClass=[dropstartString,dropendString],defaultDropdownOptions={offset:5,display:"dynamic"},showDropdownEvent=bootstrapCustomEvent(`show.bs.${dropdownString}`),shownDropdownEvent=bootstrapCustomEvent(`shown.bs.${dropdownString}`),hideDropdownEvent=bootstrapCustomEvent(`hide.bs.${dropdownString}`),hiddenDropdownEvent=bootstrapCustomEvent(`hidden.bs.${dropdownString}`);function styleDropdown(e,n){const{element:o,menu:t,originalClass:s,menuEnd:r,options:d}=e;var{offset:a}=d;const l=o.parentElement;if(["margin","top","bottom","left","right"].forEach(e=>{t.style[e]=""}),removeClass(l,"position-static"),!n){var p=hasClass(t,dropdownMenuEndClass);return l.className=s.join(" "),void(p&&!r?removeClass(t,dropdownMenuEndClass):!p&&r&&addClass(t,dropdownMenuEndClass))}let i=dropdownMenuClasses.find(e=>s.includes(e))||dropdownString,c={dropdown:[a,0,0],dropup:[0,0,a],dropstart:[-1,a,0],dropend:[-1,0,0,a]};const u={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:{left:"auto",right:"100%"},dropend:{left:"100%",right:"auto"},menuEnd:{right:0,left:"auto"}};hideMenuClass.forEach(e=>addClass(t,e));var w=new RegExp(`\\b(${dropdownString}|${dropupString}|${dropstartString}|${dropendString})+`);const m=o.offsetWidth,h=o.offsetHeight,g=t.offsetWidth,v=t.offsetHeight;var C=document.documentElement,f=document.body,E=C.clientWidth||f.clientWidth,e=C.clientHeight||f.clientHeight,n=o.getBoundingClientRect(),p=n.left+m-g<0,a=n.left-g<0,C=n.left+g>=E,f=n.left+g+m>=E,E=n.top+v>=e,e=n.top+v+h>=e,n=n.top-v<0;horizontalClass.includes(i)&&a&&f&&(i=dropdownString),horizontalClass.includes(i)&&E&&(i=dropupString),i===dropstartString&&a&&!E&&(i=dropendString),i===dropendString&&f&&!E&&(i=dropstartString),i===dropupString&&n&&!e&&(i=dropdownString),i===dropdownString&&e&&!n&&(i=dropupString),c=c[i],t.style.margin=`${c.map(e=>e&&`${e}px`).join(" ")}`,Object.keys(u[i]).forEach(e=>{t.style[e]=u[i][e]}),hasClass(l,i)||(l.className=l.className.replace(w,i)),verticalClass.includes(i)&&(!r&&C?addClass(t,dropdownMenuEndClass):r&&p&&removeClass(t,dropdownMenuEndClass),hasClass(t,dropdownMenuEndClass)&&Object.keys(u.menuEnd).forEach(e=>{t.style[e]=u.menuEnd[e]})),hideMenuClass.forEach(e=>removeClass(t,e))}function toggleDropdownDismiss(e){var n=e.open?addEventListener:removeEventListener;document[n]("click",dropdownDismissHandler),document[n]("focus",dropdownDismissHandler),document[n]("keydown",dropdownPreventScroll),document[n]("keyup",dropdownKeyHandler),"dynamic"===e.options.display&&(window[n]("scroll",dropdownLayoutHandler,passiveHandler),window[n]("resize",dropdownLayoutHandler,passiveHandler))}function toggleDropdownHandler(e,n){n=n?addEventListener:removeEventListener;e.element[n]("click",dropdownClickHandler)}function getCurrentOpenDropdown(){var e=dropdownMenuClasses.concat("btn-group").map(e=>document.getElementsByClassName(`${e} ${showClass}`)).find(e=>e.length);return e&&e.length?Array.from(e[0].children).find(e=>e.hasAttribute(dataBsToggle)):null}function dropdownDismissHandler(e){const{target:n,type:o}=e;if(n.closest){var t=getCurrentOpenDropdown();const d=t&&t.parentNode,a=t&&t[dropdownComponent],l=a&&a.menu;var s=null!==n.closest(dropdownSelector),r=d&&d.contains(n)&&("form"===n.tagName||null!==n.closest("form"));"click"===o&&isEmptyAnchor(n)&&e.preventDefault(),"focus"===o&&(n===t||n===l||l.contains(n))||r||s||a&&a.hide(t)}}function dropdownClickHandler(e){const n=this[dropdownComponent];n.toggle(this),isEmptyAnchor(e.target)&&e.preventDefault()}function dropdownPreventScroll(e){38!==e.which&&40!==e.which||e.preventDefault()}function dropdownKeyHandler({which:e}){var n=getCurrentOpenDropdown();const o=n[dropdownComponent],{menu:t,menuItems:s,open:r}=o;var d=document.activeElement,a=d===n,l=t.contains(d),n=d.parentNode===t||d.parentNode.parentNode===t;let p=s.indexOf(d);n&&(a?p=0:38===e?p=1<p?p-1:0:40===e&&(p=p<s.length-1?p+1:p),s[p]&&setFocus(s[p])),(s.length&&n||!s.length&&(l||a)||!l)&&r&&27===e&&o.toggle()}function dropdownLayoutHandler(){var e=getCurrentOpenDropdown(),e=e&&e[dropdownComponent];e&&e.open&&styleDropdown(e,1)}class Dropdown extends BaseComponent{constructor(e,n){super(dropdownComponent,e,defaultDropdownOptions,n);const o=this;var{element:e}=o,n=e.parentElement;o.menu=queryElement(`.${dropdownMenuClass}`,n);var{menu:e}=o;o.originalClass=Array.from(n.classList),o.menuEnd=hasClass(e,dropdownMenuEndClass),o.menuItems=[],Array.from(e.children).forEach(e=>{e.children.length&&"A"===e.children[0].tagName&&o.menuItems.push(e.children[0]),"A"===e.tagName&&o.menuItems.push(e)}),o.open=!1,toggleDropdownHandler(o,1)}toggle(e){var{open:n}=this;n?this.hide(e):this.show(e)}show(e){const n=this;var o=queryElement(dropdownMenuClasses.concat("btn-group").map(e=>`.${e}.${showClass}`).join(","));const t=o&&queryElement(dropdownSelector,o);t&&t[dropdownComponent].hide();const{element:s,menu:r,open:d}=n,a=s.parentNode;showDropdownEvent.relatedTarget=e||null,a.dispatchEvent(showDropdownEvent),showDropdownEvent.defaultPrevented||(styleDropdown(n,1),addClass(r,showClass),addClass(a,showClass),s.setAttribute(ariaExpanded,!0),n.open=!d,setTimeout(()=>{setFocus(r.getElementsByTagName("INPUT")[0]||s),toggleDropdownDismiss(n),shownDropdownEvent.relatedTarget=e||null,a.dispatchEvent(shownDropdownEvent)},1))}hide(e){const n=this,{element:o,menu:t,open:s}=n,r=o.parentNode;hideDropdownEvent.relatedTarget=e||null,r.dispatchEvent(hideDropdownEvent),hideDropdownEvent.defaultPrevented||(removeClass(t,showClass),removeClass(r,showClass),styleDropdown(n),o.setAttribute(ariaExpanded,!1),n.open=!s,setFocus(o),setTimeout(()=>toggleDropdownDismiss(n),1),hiddenDropdownEvent.relatedTarget=e||null,r.dispatchEvent(hiddenDropdownEvent))}dispose(){var{element:e}=this;hasClass(e.parentNode,showClass)&&this.open&&this.hide(),toggleDropdownHandler(this),super.dispose(dropdownComponent)}}Dropdown.init={component:dropdownComponent,selector:dropdownSelector,constructor:Dropdown};export default Dropdown;